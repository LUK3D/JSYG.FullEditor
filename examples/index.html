<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>JSYG tests</title>
            
        <link rel="stylesheet" href="../bower_components/jsyg-boundingbox/JSYG.BoundingBox.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-selection/JSYG.Selection.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-texteditor/JSYG.TextEditor.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-editor/JSYG.Editor.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-zoomandpan/JSYG.ZoomAndPan.css"/>
        <link rel="stylesheet" href="../JSYG.FullEditor.css"/>
            
        <script src="../bower_components/jquery/dist/jquery.js"></script>
        <script src="../bower_components/jsyg/JSYG.js"></script>
        <script src="../bower_components/jQuery.Hotkeys/jquery.hotkeys.js"></script>
        <script src="../bower_components/jquery-mousewheel/jquery.mousewheel.js"></script>
        <script src="../bower_components/js-cookie/src/js.cookie.js"></script>
        <script src="../bower_components/jsyg-path/JSYG.Path.js"></script>
        <script src="../bower_components/jsyg-pencil/JSYG.Pencil.js"></script>
        <script src="../bower_components/jsyg-draggable/JSYG.Draggable.js"></script>
        <script src="../bower_components/jsyg-resizable/JSYG.Resizable.js"></script>
        <script src="../bower_components/jsyg-rotatable/JSYG.Rotatable.js"></script>
        <script src="../bower_components/jsyg-container/JSYG.Container.js"></script>
        <script src="../bower_components/jsyg-boundingbox/JSYG.BoundingBox.js"></script>
        <script src="../bower_components/jsyg-color/JSYG.Color.js"></script>
        <script src="../bower_components/jsyg-canvas/JSYG.Canvas.js"></script>
        <script src="../bower_components/jsyg-selection/JSYG.Selection.js"></script>
        <script src="../bower_components/jsyg-alignment/JSYG.Alignment.js"></script>
        <script src="../bower_components/jsyg-texteditor/JSYG.TextEditor.js"></script>
        <script src="../bower_components/jsyg-editor/JSYG.Editor.js"></script>
        <script src="../bower_components/jsyg-shapedrawer/JSYG.ShapeDrawer.js"></script>
        <script src="../bower_components/jsyg-zoomandpan/JSYG.ZoomAndPan.js"></script>
        <script src="../bower_components/jsyg-cropandresize/JSYG.CropAndResize.js"></script>
        <script src="../bower_components/fetch/fetch.js"></script>
        <script src="../bower_components/jsyg-fetch/JSYG.fetch.js"></script>
        
        <script src="../JSYG.FullEditor.js"></script>
        <style>
            svg {
                border:1px solid gray;
            }
            .perso {
                fill:none;
                stroke:violet;
                stroke-width:4;
            }
        </style>
    </head>
    <body>
        
        <svg width="1000" height="800" id="content" style="background-color:#ddd">
            
            <!--<svg width="588" height="588">'+
                '<rect fill="orange" data-editable x="10" y="10" width="100" height="50"/>'+
                '<circle data-editable fill="red" r="50" cx="200" cy="250"/>'+
                '<ellipse fill="pink" rx="50" ry="30" cx="50" cy="250"/>'+
                '<path data-editable d="M497.885,194.197 c-35.951-52.42-101.821-88.07-177.614-89.864c-1.998-0.041-3.996-0.076-6.004-0.076c-0.002,0-0.004,0-0.006,0   c-2.004,0-4,0.036-5.995,0.076c-127.188,2.562-234.438,86.301-272.078,201.532c18.136-49.932,52.107-90.06,94.523-111.756   c22.219-11.365,46.75-17.683,72.544-17.683c41.792,0,80.278,16.559,110.958,44.369c31.15,28.237,54.245,68.078,64.56,113.999   c3.892,17.322,5.973,35.505,5.973,54.259c0,24.827-3.645,48.653-10.319,70.803c43.404-10.909,81.033-33.316,108.05-63.098   c27.84-30.689,44.418-69.196,44.418-111.013C526.894,252.353,516.317,221.074,497.885,194.197z" stroke-miterlimit="10" stroke-width="3" stroke="#F1F2F2" fill="blue"></path>'+
                '<text font-size="50px" x="50" y="50">Le nouveau GOSSIP !</text>'+
            '</svg>
            -->
        
        </svg>
        <br/>
        
        <button id="alignLeft">Align selection to left</button>
        
        <button id="moveBack">Move back</button>
        <button id="moveFront">Move front</button>
        
        <button id="targetText">target text</button>
        
        <button id="drawPath">Draw path</button>
        
        <button id="drawRect">Draw rect</button>
        <button id="drawCircle">Draw circle</button>
        <button id="drawEllipse">Draw ellipse</button>
        
        <label>
            <input type="checkbox" id="repeatDrawing"/> Repeat drawing
        </label>
                
        <button id="toDataURL">Convert to DataURL</button>
        <button id="toCanvas">Convert to Canvas</button>
        
        <button id="delete">Delete selected elements</button>
        
        <br/>
        <br/>
        <input type="file" id="uploadFile"/>
        
        <br/>
        <div id="infos"></div>
        <div id="canvasContent"></div>
        
        <script>
            
            var fullEditor = new JSYG.FullEditor('svg');
            
            var shapeEditor = fullEditor.shapeEditor;
            
            fullEditor.cursorDrawing = "copy";
            
            fullEditor.enable();
            
            $("#alignLeft").on("click",function() {
                shapeEditor.alignSelection("left");
            });
            
            $("#moveBack").on("click",function() {
                var target = shapeEditor.target();
                if (target.length == 1) target.moveBack();
            });
            
            $("#moveFront").on("click",function() {
                var target = shapeEditor.target();
                if (target.length == 1) target.moveFront();
            });
            
            $("#targetText").on("click",function() {
                shapeEditor.target("#content text");
                shapeEditor.show();
            });
                        
            $("#uploadFile").on("change",function() {
               fullEditor.loadFile(this.files[0]);
            });
                        
            $("#drawPath").on("click",function() {
                fullEditor.enablePathDrawer( new JSYG.Path().addClass("perso") );
            });
            
            $("#drawRect").on("click",function() {
                fullEditor.enableShapeDrawer( new JSYG("<rect>").addClass("perso") );
            });
            
            $('#repeatDrawing').on("change",function() {
                fullEditor.repeatDrawing = this.checked;
            });
            
            $('#delete').on("click",function() {
                fullEditor.removeSelection();
            });
            
            
            $("#toDataURL").on("click",function() {
               fullEditor.toDataURL().then(function(url) {
                   window.open(url);
               });
            });
            
            $("#toCanvas").on("click",function() {
               fullEditor.toCanvas().then(function(canvas) {
                   $("#canvasContent").empty().append(canvas);
               });
            });
            
            var $infos = $('#infos');
            
            shapeEditor.ctrlsDrag.on("drag",function(e) {
                var text = JSON.stringify( new JSYG(this).getDim() );
                $infos.text(text);
            });
            
            fullEditor.loadURL("kiwi.svg");
        
            
        </script>
    </body>
</html>