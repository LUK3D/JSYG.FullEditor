<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>JSYG tests</title>
        
        <link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.css"/>
        <link rel="stylesheet" href="../bower_components/fontawesome/css/font-awesome.css"/>
        
        <link rel="stylesheet" href="../bower_components/jsyg-boundingbox/JSYG.BoundingBox.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-selection/JSYG.Selection.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-texteditor/JSYG.TextEditor.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-editor/JSYG.Editor.css"/>
        <link rel="stylesheet" href="../bower_components/jsyg-zoomandpan/JSYG.ZoomAndPan.css"/>
        <link rel="stylesheet" href="../JSYG.FullEditor.css"/>
        
        <script src="../bower_components/jquery/dist/jquery.js"></script>
        <script src="../bower_components/bootstrap/dist/js/bootstrap.js"></script>
        <script src="../bower_components/jsyg/JSYG.js"></script>
        <script src="../bower_components/jQuery.Hotkeys/jquery.hotkeys.js"></script>
        <script src="../bower_components/jquery-mousewheel/jquery.mousewheel.js"></script>
        <script src="../bower_components/js-cookie/src/js.cookie.js"></script>
        <script src="../bower_components/jsyg-path/JSYG.Path.js"></script>
        <script src="../bower_components/jsyg-pencil/JSYG.Pencil.js"></script>
        <script src="../bower_components/jsyg-draggable/JSYG.Draggable.js"></script>
        <script src="../bower_components/jsyg-resizable/JSYG.Resizable.js"></script>
        <script src="../bower_components/jsyg-rotatable/JSYG.Rotatable.js"></script>
        <script src="../bower_components/jsyg-container/JSYG.Container.js"></script>
        <script src="../bower_components/jsyg-boundingbox/JSYG.BoundingBox.js"></script>
        <script src="../bower_components/jsyg-color/JSYG.Color.js"></script>
        <script src="../bower_components/jsyg-canvas/JSYG.Canvas.js"></script>
        <script src="../bower_components/jsyg-selection/JSYG.Selection.js"></script>
        <script src="../bower_components/jsyg-alignment/JSYG.Alignment.js"></script>
        <script src="../bower_components/jsyg-texteditor/JSYG.TextEditor.js"></script>
        <script src="../bower_components/jsyg-editor/JSYG.Editor.js"></script>
        <script src="../bower_components/jsyg-shapedrawer/JSYG.ShapeDrawer.js"></script>
        <script src="../bower_components/jsyg-zoomandpan/JSYG.ZoomAndPan.js"></script>
        <script src="../bower_components/jsyg-cropandresize/JSYG.CropAndResize.js"></script>
        <script src="../bower_components/fetch/fetch.js"></script>
        <script src="../bower_components/jsyg-fetch/JSYG.fetch.js"></script>
        <script src="../bower_components/jsyg-undoredo/JSYG.UndoRedo.js"></script>
        
        <script src="../JSYG.FullEditor.js"></script>
        <style>
            svg {
                border:1px solid gray;
                background-color:#ddd;
                display:inline-block;
            }
            form {
                display:inline-block;
                vertical-align: top;
                width:25%;
            }
            .perso {
                fill:none;
                stroke:violet;
                stroke-width:4;
            }
            fieldset {
                margin:10px;
            }
            #uploadFile {
                display:none;
            }
        </style>
    </head>
    <body>
        <svg width="70%" height="800" id="content"></svg>
        
        
        <form class="form-inline">
            
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title">
                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                File
                            </a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                        <div class="panel-body">
                            <fieldset>
                                <button class="btn btn-default" id="newDocument" type="button">New document</button>
                                <button class="btn btn-default" id="openDocument" type="button">Open document</button>
                                <input type="file" id="uploadFile"/>
                                <br/>
                                <select id="examples" class="form-control">
                                    <option value="firefox">firefox logo</option>
                                    <option value="gnu">gnu logo</option>
                                    <option value="world">world</option>
                                </select>
                                <button class="btn btn-default" id="openExample" type="button">Open example</button>
                                <br/>
                                <div class="form-group">
                                    <label for="width">Width : </label>
                                    <input type="text" class="form-control" id="width" placeholder="width" value="500"/>
                                </div>
                                <div class="form-group">
                                    <label for="height">Height : </label>
                                    <input type="text" class="form-control" id="height" placeholder="height" value="500"/>
                                </div>
                                <br/>
                                <br/>
                                <button class="btn btn-default" id="toSVGDataURL" type="button">Export to SVG</button>
                                <button class="btn btn-default" id="toPNGDataURL" type="button">Export to PNG</button>
                            </fieldset>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingTwo">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                Edit
                            </a>
                        </h4>
                    </div>
                    <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingTwo">
                        <div class="panel-body">
                            <fieldset>
                                <button class="btn btn-default" id="copy" type="button">
                                    <i class="fa fa-files-o"></i>
                                    Copy (<code>Ctrl+C</code>)
                                </button>
                                
                                <button class="btn btn-default" id="cut" type="button">
                                    <i class="fa fa-scissors"></i>
                                    Cut (<code>Ctrl+X</code>)
                                </button>
                                
                                <button class="btn btn-default" id="paste" type="button">
                                    <i class="fa fa-clipboard"></i>
                                    Paste (<code>Ctrl+V</code>)
                                </button>
                                
                                <button class="btn btn-default" id="remove" type="button">
                                    <i class="fa fa-remove"></i>
                                    Delete (<code>Del</code>)
                                </button>
                                <br/><br/>
                                <button class="btn btn-default" id="undo" type="button">
                                    <i class="fa fa-undo"></i>
                                    Undo (<code>Ctrl+Z</code>)
                                </button>
                                
                                <button class="btn btn-default" id="redo" type="button">
                                    <i class="fa fa-repeat"></i>
                                    Redo (<code>Ctrl+Y</code>)
                                </button>
                            </fieldset>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingThree">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                View
                            </a>
                        </h4>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingThree">
                        <div class="panel-body">
                            <fieldset>
                                <p>Use <code>Ctrl+mousewheel</code> to zoom in and out.</p>
                                <button class="btn btn-default" id="zoomIn" type="button">
                                    <i class="fa fa-zoom-in"></i>
                                    Zoom in
                                </button>
                                <button class="btn btn-default" id="zoomOut" type="button">
                                    <i class="fa fa-zoom-out"></i>
                                    Zoom out
                                </button>
                                <button class="btn btn-default" id="marqueeZoom" type="button">Marquee Zoom</button>
                                <button class="btn btn-default" id="fitToCanvas" type="button">Fit to canvas</button>
                                <br/>
                                <br/>
                                 <label>
                                    <input type="checkbox" id="resizable"/> Canvas resizable
                                </label>
                            </fieldset>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingFive">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                Draw
                            </a>
                        </h4>
                    </div>
                    <div id="collapseFive" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingFive">
                        <div class="panel-body">
                            <fieldset>
                                
                                <button class="btn btn-default" id="insertElmt" type="button">Insert Rect</button>
                                
                                <button class="btn btn-default" id="insertText" type="button">Insert Text</button>
                                
                                <br/>
                                <br/>
                                Draw shape :
                                <select id="shape" class="form-control">
                                    <option>rect</option>
                                    <option>circle</option>
                                    <option>ellipse</option>
                                </select>
                                
                                <button class="btn btn-default" id="drawShape" type="button">
                                    ok
                                </button>
                                
                                <br/>
                                <br/>
                                Draw path :
                                <select id="drawingPathMethod" class="form-control">
                                    <option value="point2point">point to point</option>
                                    <option value="freehand" selected="selected">free hand</option>
                                </select>
                                
                                <button class="btn btn-default" id="drawPath" type="button">
                                    ok
                                </button>
                                
                            </fieldset>
                        </div>
                    </div>
                </div>
                
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingSix">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                                Hierarchy
                            </a>
                        </h4>
                    </div>
                    <div id="collapseSix" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingSix">
                        <div class="panel-body">
                            <fieldset>
                                
                                <p>Use <code>Ctrl+click</code> to select multiple elements (or draw a selection with mouse).</p>
                                
                                <button class="btn btn-default" id="group" type="button">Group elements</button>
                                
                                <button class="btn btn-default" id="ungroup" type="button">Ungroup elements</button>
                                
                                <br/>
                                <br/>
                                Align selected elements<br/>
                                <button class="btn btn-default" id="alignLeft" type="button">left</button>
                                <button class="btn btn-default" id="alignCenter" type="button">center</button>
                                <button class="btn btn-default" id="alignRight" type="button">right</button>
                                <button class="btn btn-default" id="alignTop" type="button">top</button>
                                <button class="btn btn-default" id="alignMiddle" type="button">middle</button>
                                <button class="btn btn-default" id="alignBottom" type="button">bottom</button>
                                
                                <br/>
                                <br/>
                                
                                <button class="btn btn-default" id="moveToBack" type="button">Move to back</button>
                                <button class="btn btn-default" id="moveBack" type="button">Move back</button>
                                <button class="btn btn-default" id="moveFront" type="button">Move front</button>
                                <button class="btn btn-default" id="moveToFront" type="button">Move to front</button>
                                
                            </fieldset>
                        </div>
                    </div>
                </div>
                
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingSeven">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                                Options
                            </a>
                        </h4>
                    </div>
                    <div id="collapseSeven" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingSeven">
                        <div class="panel-body">
                            <fieldset>
                                
                                <label>
                                    <input type="checkbox" id="editCtrlPoints"/> Edit paths control points
                                </label>
                                
                                <br/>
                                
                                <label>
                                    <input type="checkbox" id="keepShapeRatio"/> Keep Shapes ratio
                                </label>
                                                                
                            </fieldset>
                        </div>
                    </div>
                </div>    
            </div>
            
        </form>
        
        <script>
            $(function() {
                
                $('.collapse').collapse({parent:"#accordion"});
                

                window.fullEditor = new JSYG.FullEditor('svg');
            
                //fullEditor.editableShapes = "> *";
                                        
                fullEditor.enable();


                ["left","center","right","top","middle","bottom"].forEach(function(type) {
                    
                    $('#align'+JSYG.ucfirst(type)).on("click",function() {
                        fullEditor.align(type);
                    })
                });
                
                ["Front","Back","ToFront","ToBack"].forEach(function(type) {
                                        
                    $('#move'+type).on("click",function() {
                        fullEditor["moveTarget"+type]();
                    });
                });
                            
                $("#insertElmt").on("click",function() {
                    var elmt = new JSYG("<rect>").addClass("perso").setDim({width:200,height:100});
                    fullEditor.enableInsertElement(elmt);
                });
            
                $("#insertText").on("click",function() {
                    var text = new JSYG("<text>").text("Bonjour le monde");
                    fullEditor.enableInsertText(text);
                    new JSYG(this).trigger("blur");
                });
                
                $("#newDocument").on("click",function() {
                    fullEditor.newDocument( $('#width').val(), $('#height').val() );
                });
            
                $("#openDocument").on("click",function() {
                    $("#uploadFile").trigger("click");
                });

                $("#uploadFile").on("change",function() {
                    fullEditor.loadFile(this.files[0])
                    .catch(alert);
                });
                
                $('#openExample').on("click",function() {
                   
                    fullEditor.loadURL("examples/" + $('#examples').val() + '.svg');
                });
            
                fullEditor.on("load",function() {
                    var dim = fullEditor.getDimDocument();
                    $('#width').val(dim.width);
                    $('#height').val(dim.height);
                });
            
                $('#width').on("change",function() {
                    fullEditor.setDimDocument({width:this.value});
                });
            
                $('#height').on("change",function() {
                    fullEditor.setDimDocument({height:this.value});
                });
            

                $("#drawPath").on("click",function() {
                    fullEditor.enablePathDrawer( new JSYG.Path().addClass("perso") );
                });

                $("#drawShape").on("click",function() {
                    var tag = $('#shape').val();
                    var shape = new JSYG("<"+tag+">").addClass("perso") 
                    fullEditor.enableShapeDrawer(shape);
                });
            
                $('#drawingPathMethod').on("change",function() {
                    fullEditor.drawingPathMethod = this.value;
                }).trigger("change");
                
                $('#editCtrlPoints').on("change",function() {
                    fullEditor.editCtrlPoints = this.checked; 
                }).trigger("change");
            
                $('#keepShapeRatio').on("change",function() {
                    fullEditor.keepShapeRatio = this.checked; 
                }).trigger("change");
                
                $('#resizable').on("change",function() {
                    fullEditor.resizable = this.checked;
                }).trigger("change");
                            
                $('#marqueeZoom').on("click",function() {
                    fullEditor.enableMarqueeZoom();
                });
            
                $('#fitToCanvas').on("click",function() {
                    fullEditor.fitToCanvas();
                });
            
                $('#zoomIn').on("click",function() {
                    fullEditor.zoomAndPan.scale(1.1);
                });
            
                $('#zoomOut').on("click",function() {
                    fullEditor.zoomAndPan.scale(0.9);
                });
           
                ["remove","copy","cut","paste","undo","redo","group","ungroup"].forEach(function(action) {
                
                    $('#'+action).on("click",function() {
                        fullEditor[action]();
                    });
                });
            
                ["toSVGDataURL","toPNGDataURL"].forEach(function(action) {
                
                    $("#"+action).on("click",function() {
                        fullEditor[action]().then(function(url) {
                            window.open(url);
                        });
                    });
                });

                fullEditor.loadURL("kiwi.svg");

            });
        </script>
    </body>
</html>
